{
  "align_labels_right": 0,
  "creation":"2022-06-02 14:39:18.435297",
  "custom_format": 1,
  "disabled": 0,
  "doc_type": "Sales Invoice",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": "Default",
  "html": "<!-- get receiver details -->\n{% if doc.company_address %}\n  {% set cmp_addr = frappe.get_doc(\"Address\", doc.company_address) %}\n{% endif %}\n{% set company = frappe.get_doc(\"Company\", doc.company) %}\n{% if company.default_bank_account %}\n  {% set receiving_account = frappe.get_doc(\"Account\", company.default_bank_account) %}\n{% else %}\n  {{ _(\"Please set a default bank account in the company record\") }}\n{% endif %}\n{% if cmp_addr %}\n  {% set address_array = cmp_addr.address_line1.split(\" \") %}\n  {% set address_line_item_count = address_array | count %}\n  {% set cmp_country = frappe.get_doc(\"Country\", cmp_addr.country) %}\n  {% set cmp_country_code = cmp_country.code | upper %}\n  {% set cmp_address_line_detail = {'name': doc.company, 'street': '', 'number': '', 'pin': cmp_addr.pincode, 'city': cmp_addr.city, 'country': cmp_country_code } %}\n  {% for i in range(0, (address_line_item_count - 1)) %}\n    {% if cmp_address_line_detail.update({'street': cmp_address_line_detail.street + \" \" + address_array[i] }) %}{% endif %}\n  {% endfor %}\n  {% if cmp_address_line_detail.update({'number': address_array[address_line_item_count - 1]}) %}{% endif %}\n\n<!-- get payer details -->\n{% if doc.customer_address %}\n  {% set pay_addr = frappe.get_doc(\"Address\", doc.customer_address) %}\n{% endif %}\n{% if pay_addr %}\n  {% set pay_address_array = pay_addr.address_line1.split(\" \") %}\n  {% set pay_address_line_item_count = pay_address_array | count %}\n  {% set pay_country = frappe.get_doc('Country', pay_addr.country) %}\n  {% set pay_country_code = pay_country.code | upper %}\n  {% set pay_address_line_detail = {'name': doc.customer, 'street': '', 'number': '', 'pin': pay_addr.pincode, 'city': pay_addr.city, 'country': pay_country_code } %}\n  {% for i in range(0, (pay_address_line_item_count - 1)) %}\n    {% if pay_address_line_detail.update({'street': pay_address_line_detail.street + \" \" + pay_address_array[i] }) %}{% endif %}\n  {% endfor %}\n  {% if pay_address_line_detail.update({'number': pay_address_array[pay_address_line_item_count - 1]}) %}{% endif %}\n\n\n<!-- HEAD -->\n<div  id=\"htmlheader\" class=\"has-variables\">\n  <div class=\"print-heading\">\n    {% set letter_heads = frappe.get_list('Letter Head', filters={'is_default': '1'}, fields=['name']) %}\n    {% if letter_heads %}\n      {% set letter_head = frappe.get_doc(\"Letter Head\", letter_heads[0].name) %}\n      {% if letter_head %}\n        {{ letter_head.content }}\n      {% else %}\n        <p>No letter head found. Please define a letter head under print settings and mark it as default</p>\n      {% endif %}\n    {% endif %}\n  </div>\n</div>\n\n<!-- CONTENT -->\n<div id=\"main_content\">\n\t<table style=\"width: 100%;\">\n\t\t<tr>\n\t\t\t<td style=\"width: 50%;\">\n\t\t\t\t<div style=\"display: block;\">{{ doc.customer }}</div>\n\t\t\t\t<div style=\"display: block;\">{{ pay_address_line_detail.street }} {{ pay_address_line_detail.number }}<br />\n          {{ pay_address_line_detail.pin }} {{ pay_address_line_detail.city }}<br /></div>\n\t\t\t</td>\n    </tr>\n  </table>\n  <table style=\"width: 100%;\">\n    <tr>\n      <td style=\"width: 50%;\">\n      </td>\n      <td style=\"width: 50%;\">\n        <div style=\"display: block;\">{{ doc.company }}</div>\n        <div style=\"display: block;\">{{ cmp_address_line_detail.street }} {{ cmp_address_line_detail.number }}</div>\n        <div style=\"display: block;\">{{ cmp_address_line_detail.pin }} {{ cmp_address_line_detail.city }}</div>\n        <br />\n        <div style=\"display: block;\">{{ _(\"Date :\") }} {{ doc.get_formatted('posting_date') }}</div>\n        <div style=\"display: block;\">{{ _(\"Payment Due Date\") }} {{ _(\" :\") }} {{ doc.get_formatted('due_date') }}</div>\n      </td>\n\t\t</tr>\n\t</table><br />\n  <table style=\"width: 100%;\">\n\t\t<tr>\n\t\t\t<td style=\"vertical-align: bottom !important;\">\n\t\t\t\t<strong>{{ _(\"Sales Invoice\") }}: {{ doc.name }}</strong>\n\t\t\t</td>\n\t\t\t<td style=\"vertical-align: bottom !important; text-align: left;\">\n\t\t\t\t{% if doc.items[0].sales_order %}\n\t\t\t\t\t{% set sales_order = frappe.get_doc(\"Sales Order\", doc.items[0].sales_order) %}\n\t\t\t\t\t<strong>{{ _(\"Sales Order\") }}:</strong> {{ sales_order.get_formatted('transaction_date') }}<br>\n\t\t\t\t{% endif %}\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\t<table style=\"width: 100%\">\n\t\t<tr style=\"border-top: solid #424142 1px; border-bottom: solid #424142 1px;\">\n\t\t\t<th style=\"width: auto\">{{ _(\"Pos\") }}</th>\n\t\t\t<th style=\"width: auto\">{{ _(\"Description\") }}</th>\n\t\t\t<th style=\"width: auto\">{{ _(\"Unit\") }}</th>\n\t\t\t<th style=\"width: auto\">{{ _(\"Qty\") }}</th>\n\t\t\t<th style=\"width: auto;text-align: right;\">{{ _(\"Unit price\") }}</th>\n\t\t\t<th style=\"width: auto;text-align: right;\">{{ _(\"Amount HT\") }}</th>\n\t\t</tr>\n\t\t{% for n in doc.items %}\n\t\t\t <tr>\n\t\t\t\t<td>{{ loop.index }}</td>\n\t\t\t\t<td>{{ _(n.description) }}</td>\n\t\t\t\t<td>{{ _(n.stock_uom) }}</td>\n\t\t\t\t<td>{{ n.qty }}</td>\n\t\t\t\t<td style=\"width: auto;text-align: right;\">{{ n.get_formatted('rate') }}</td>\n\t\t\t\t<td style=\"width: auto;text-align: right;\">{{ n.get_formatted('amount') }}</td>\n\t\t\t </tr>\n\t\t {% endfor %}\n\t</table>\n\t<p><br></p>\n\t<table style=\"width: 100%;\">\n    <tr style=\"border-top: solid #424142 1px; border-bottom: solid #424142 1px;\">\n      <td class=\"Payment_table\">{{ _(\"Total HT\") }}</td>\n      <td class=\"Payment_table\" style=\"text-align: right;\">{{ doc.get_formatted('total') }}</td>\n    </tr>\n    <tr>\n      <td class=\"Payment_table\">{{ _(\"VAT\") }}</td>\n      <td class=\"Payment_table\" style=\"text-align: right;\">{{ doc.get_formatted('base_total_taxes_and_charges') }}</td>\n    </tr>\n    <tr style=\"border-top: solid #424142 1px;\">\n      <td class=\"Payment_table\">{{ _(\"Cumulative rounding difference (s)\") }}</td>\n      <td class=\"Payment_table\" style=\"text-align: right;\">{{ doc.get_formatted('rounding_adjustment') }}</td>\n    </tr>\n    <tr style=\"border-top: solid #424142 1px; border-bottom: solid #424142 1px;\">\n\t\t\t<td class=\"Payment_table\"><strong>{{ _(\"Total round incl.\") }}</strong></td>\n\t\t\t<td class=\"Payment_table\" style=\"text-align: right;\"><strong>{{ doc.get_formatted('rounded_total') }}</strong></td>\n\t  </tr>\n\t</table>\n</div>\n\n<!-- FOOTER -->\n<div id=\"htmlfooter\" class=\"has-variables\" style=\"padding-top: 20px;\">\n      {% if letter_head %}\n        {{ letter_head.footer}}\n      {% else %}\n        <p>No letter head found. Please define a letter head under print settings and mark it as default</p>\n      {% endif %}\n</div>\n\n<!-- QR code section -->\n<div class=\"page-break\"></div>\n<div class=\"qr-container\">\n    <table style=\"width: 100%; height: 396px; page-break-inside: avoid !important; border-top: 1px dashed #424142;\">\n     <tr><!-- three columns -->\n      <td style=\"width: 62mm; border-left: 1px dashed #424142; border-bottom: 1px dashed #424142;\">\n        <table style=\"width: 100%; \">\n          <tr><td style=\"font-size: 11pt;font-weight: bold;\">{{ _(\"Receipt\") }}</td></tr>\n          <tr><td style=\"font-size: 6pt;font-weight: bold;padding-bottom: 0 !important;\">{{ _(\"Account / Payable to \") }}</td></tr>\n          <tr><td style=\"font-size: 8pt;padding-top: 0 !important;padding-bottom: 0 !important;\">{{ receiving_account.iban }}</td></tr>\n          <tr><td style=\"font-size: 8pt;padding-top: 0 !important;\">{{ cmp_address_line_detail.name }}<br />\n            {{ cmp_address_line_detail.street }} {{ cmp_address_line_detail.number }}<br />\n            {{ cmp_address_line_detail.country }}-{{ cmp_address_line_detail.pin }} {{ cmp_address_line_detail.city }}<br />\n          </td></tr>\n          <tr><td style=\"font-size: 6pt;font-weight: bold;padding-bottom: 0 !important;\">{{ _(\"Reference number\") }}</td></tr>\n          <tr><td style=\"font-size: 8pt;padding-top: 0 !important;\">{{ doc.reference_number }}</td></tr>\n          <tr><td style=\"font-size: 6pt;font-weight: bold;padding-bottom: 0 !important;\">{{ _(\"Payable by\") }}</td></tr>\n          <tr><td style=\"font-size: 8pt;padding-top: 0 !important;\">{{ pay_address_line_detail.name }}<br />\n            {{ pay_address_line_detail.street }} {{ pay_address_line_detail.number }}<br />\n            {{ pay_address_line_detail.country }}-{{ pay_address_line_detail.pin }} {{ pay_address_line_detail.city }}<br />\n          </td></tr>\n          <tr><td>\n           <table style=\"width: 100%;\">\n            <tr>\n             <td style=\"font-size: 6pt;font-weight: bold;\">{{ _(\"Currency\") }}</td>\n             <td style=\"font-size: 6pt;font-weight: bold;\">{{ _(\"Amount\") }}</td>\n            </tr>\n            <tr>\n             <td style=\"font-size: 8pt;\">{{ doc.currency }}</td><!-- must be with space as thousand separator and point for decimal -->\n             <td style=\"font-size: 8pt;\">{{ \"{:,.2f}\".format(doc.rounded_total).replace(\",\", \" \") }}</td>\n            </tr>\n           </table>\n          </td></tr>\n        </table>\n      </td>\n      <td style=\"width: 56mm; border-left: 1px dashed #424142; border-bottom: 1px dashed #424142;\"><!-- middle column -->\n       <table style=\"width: 100%; \">\n        <tr><td style=\"font-size: 11pt;font-weight: bold;\">{{ _(\"Payment part \") }}</td></tr>\n        <tr><td><!-- QR code -->\n       <img src=\"http://qr-code.2itea.global/api/iso20022.php?iban={{ receiving_account.iban or ''}}&receiver_name={{ cmp_address_line_detail.name }}&receiver_street={{ cmp_address_line_detail.street | trim }}&receiver_number={{ cmp_address_line_detail.number }}&receiver_pincode={{ cmp_address_line_detail.pin }}&receiver_town={{ cmp_address_line_detail.city }}&receiver_country={{ cmp_address_line_detail.country }}&final_receiver_name={{ cmp_address_line_detail.name }}&final_receiver_street={{ cmp_address_line_detail.street | trim }}&final_receiver_number={{ cmp_address_line_detail.number }}&final_receiver_pincode={{ cmp_address_line_detail.pin }}&final_receiver_town={{ cmp_address_line_detail.city }}&final_receiver_country={{ cmp_address_line_detail.country }}&amount={{ doc.rounded_total }}&currency={{ doc.currency }}&due_date={{ doc.due_date }}&payer_name={{ pay_address_line_detail.name }}&payer_street={{ pay_address_line_detail.street | trim }}&payer_number={{ pay_address_line_detail.number }}&payer_pincode={{ pay_address_line_detail.pin }}&payer_town={{ pay_address_line_detail.city }}&payer_country={{ pay_address_line_detail.country }}&reference_type=SCOR&reference={{ doc.reference_number_full }}&message={{ _(\"Facture N°:\") }} {{ doc.name }}\" style=\"width: 46mm !important; height: 46mm !important;\" />\n         </td></tr>\n        <tr><td>\n         <table style=\"width: 100%;\">\n          <tr>\n           <td style=\"font-size: 8pt;font-weight: bold;\">{{ _(\"Currency\") }}</td>\n           <td style=\"font-size: 8pt;font-weight: bold;\">{{ _(\"Amount\") }}</td>\n          </tr>\n          <tr>\n           <td style=\"font-size: 10pt;\">{{ doc.currency }}</td><!-- must be with space as thousand separator and point for decimal -->\n           <td style=\"font-size: 10pt;\">{{ \"{:,.2f}\".format(doc.rounded_total).replace(\",\", \" \") }}</td>\n          </tr>\n         </table>\n        </td></tr>\n       </table>\n      </td>\n    \n      <td style=\"width: 92mm; border-bottom: 1px dashed #424142; border-right: 1px dashed #424142;\"><!-- right column -->\n       <table>\n        <tr><td style=\"font-size: 8pt;font-weight: bold;padding-bottom: 0 !important;\">{{ _(\"Account / Payable to\") }}</td></tr>\n        <tr><td style=\"font-size: 10pt;padding-top: 0 !important;padding-bottom: 0 !important;\">{{ receiving_account.iban or _(\"Company default bank IBAN not found\") }}</td></tr>\n        <tr><td style=\"font-size: 10pt;padding-top: 0 !important;\">{{ cmp_address_line_detail.name }}<br />\n          {{ cmp_address_line_detail.street }} {{ cmp_address_line_detail.number }}<br />\n          {{ cmp_address_line_detail.country }}-{{ cmp_address_line_detail.pin }} {{ cmp_address_line_detail.city }}<br />\n        </td></tr>\n        <tr><td style=\"font-size: 8pt;font-weight: bold;padding-bottom: 0 !important;\">{{ _(\"Reference number\") }}</td></tr>\n        <tr><td style=\"font-size: 10pt;padding-top: 0 !important;\">{{ doc.reference_number }}</td></tr>\n        <tr><td style=\"font-size: 8pt;font-weight: bold;padding-bottom: 0 !important;\">{{ _(\"Additional Information\") }}</td></tr>\n        <tr><td style=\"font-size: 10pt;padding-top: 0 !important;\">{{ _(\"Facture N°:\") }} {{ doc.name }}</td></tr>\n        <tr><td style=\"font-size: 8pt;font-weight: bold;padding-bottom: 0 !important;\">{{ _(\"Payable by\") }}</td></tr>\n        <tr><td style=\"font-size: 10pt;padding-top: 0 !important;padding-bottom: 0 !important;\">{{ pay_address_line_detail.name }}<br />\n          {{ pay_address_line_detail.street }} {{ pay_address_line_detail.number }}<br />\n          {{ pay_address_line_detail.country }}-{{ pay_address_line_detail.pin }} {{ pay_address_line_detail.city }}<br />\n        </td></tr>\n       </table>\n      </td>\n     </tr>\n    </table>\n</div>\n\n<!-- control: customer address missing -->\n{% else %}\n<p>{{ _(\"Customer address missing, please add to sales invoice\") }}</p>\n{% endif %}\n\n<!-- control: company address missing -->\n{% else %}\n<p>{{ _(\"Company address missing, please add to sales invoice\") }}</p>\n{% endif %}",
  "css": ".print-heading {\n    border-bottom: 1px solid #cfcfcf;\n}\n.print-format th {\n    background-color: #e9e9e9 !important;\n}\n.page-break {\n  break-before: page;\n}\n.qr-container {\n    position: absolute;\n    display: contents;\n    bottom: -100%;\n    width: 100%;\n}",
  "idx": 0,
  "line_breaks": 0,
  "modified":"2023-08-02 10:07:09.162682",
  "modified_by": "Administrator",
  "module": "ERPNextSwiss",
  "name":"QR Sales Invoice Switzerland Rounding - Description Details",
  "owner": "Administrator",
  "print_format_builder": 0,
  "print_format_type": "Server",
  "show_section_headings": 0,
  "standard": "Yes"
}
